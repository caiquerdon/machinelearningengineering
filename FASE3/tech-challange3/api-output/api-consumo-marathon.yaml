# Arquivo YAML para definir a HTTP API no API Gateway

openapi: 3.0.3
info:
  title: Athlete Readiness API
  version: 1.0.0
  description: |
    API que verifica se um atleta está pronto para a maratona.
servers:
  - url: https://SEU_API_ID.execute-api.us-east-1.amazonaws.com
    description: Endpoint público da API (substitua pelo seu)
paths:
  /predict:
    get:
      summary: Consultar prontidão do atleta
      description: Retorna se o atleta está pronto para a maratona com base no modelo armazenado no S3.
      parameters:
        - in: query
          name: athlete
          required: true
          description: ID do atleta (exemplo: `771514`)
          schema:
            type: string
      responses:
        "200":
          description: Sucesso
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OkResponse"
              examples:
                Exemplo de sucesso:
                  value:
                    data:
                      athlete_id: "771514"
                      ready: true
                      message: "O atleta está pronto para a Maratona"
        "400":
          description: Parâmetro ausente
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                Falta de parâmetro:
                  value:
                    error:
                      code: "BAD_REQUEST"
                      message: "Parâmetro 'athlete' é obrigatório."
        "404":
          description: Atleta não encontrado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                Não encontrado:
                  value:
                    error:
                      code: "NOT_FOUND"
                      message: "Atleta não encontrado."
        "500":
          description: Erro interno
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                Erro interno:
                  value:
                    error:
                      code: "INTERNAL_ERROR"
                      message: "Falha ao carregar dados de origem."
components:
  schemas:
    OkResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            athlete_id:
              type: string
              example: "771514"
            ready:
              type: boolean
              example: true
            message:
              type: string
              example: "O atleta está pronto para a Maratona"
    ErrorResponse:
      type: object
      properties:
        error:
          type: object
          properties:
            code:
              type: string
              example: "BAD_REQUEST"
            message:
              type: string
              example: "Mensagem de erro"
